<!--jgorycki: putting DOCTYPE here does evil things to the parser - it tries to parse the -->
		<!--downloaded DTD file which happens to be corrupt (JetBrain sucks?)-->
<!--<!DOCTYPE idea-plugin PUBLIC "Plugin/DTD" "http://plugins.intellij.net/plugin.dtd"> -->
<idea-plugin url="http://www.atlassian.com">

	<name>Atlassian</name>
	<!-- taken from pom to identify plugin package in internal IDEA plugin manager's repository-->
	<!--
	todo lguminski/jjaroczynski check if there is some decent way of getting artifactId from pom.xml
	<plugin-id>${project.artifactId}</plugin-id>
-->
	<plugin-id>atlassian-idea-plugin</plugin-id>
	<description>
		<![CDATA[
		The plugin providing IDEA IDE integration for the following Atlassian products:
		<ul>
			<li>Bamboo (2.0 and above)</li>
			<li>Crucible</li>
			<li>Jira</li>
			<li>Confluence - in the future</li>
			<li>Fisheye - in the future</li>
		</ul>
		]]>
	</description>

	<version>${project.version}, SVN:${buildNumber}</version>

	<!--no email link for now - we don't have the plugin email alias yet-->
	<!--<vendor url="http://www.atlassian.com" email="support@atlassian.com">Atlassian</vendor>-->
	<vendor url="http://www.atlassian.com">Atlassian</vendor>

	<!--we will only support IDEAs 7.x for now - the one we are testing on -->
	<!--jgorycki: I hope 7126 is the first build of 7.0. This is at least what the checkstyle plugin uses-->
	<!-- jjaroczynski: official build of 7.0 was 7361.  -->
	<idea-version since-build="7361"/>

	<change-notes>
		<![CDATA[
		<ul>
			<li>0.5.0: even more small improvements and bugfixes. UI looks really nice now</li>
			<li>0.4.0: many small improvements and bugfixes</li>
			<li>0.3.1: now with basic JIRA support! And autoupdate</li>
			<li>0.3.0: broken :(</li>
			<li>0.2.0: Look&feel improvements, bug fixes and initial support for Crucible</li> 
			<li>0.1.0: A much more stable version with a nicely working bamboo build status support,
			but crappy visuals</li>
			<li>0.0.1: Initial version with minimal functionality and many annoyng bugs</li>
		</ul>
		]]>
	</change-notes>

	<extensions xmlns="com.intellij">
		<arealistener implementation="com.atlassian.theplugin.idea.PerProjectPicoInit" />
	</extensions>
	
	<application-components>
		<component>
			<implementation-class>com.atlassian.theplugin.idea.ThePluginApplicationComponent</implementation-class>
		</component>
	</application-components>
	<project-components>
		<component>
			<implementation-class>com.atlassian.theplugin.idea.ThePluginProjectComponent</implementation-class>
		</component>
	</project-components>

    <actions>
		<action id="ThePlugin.ShowHideMainToolWindow" class="com.atlassian.theplugin.idea.action.ShowHideMainPluginWindowAction" text="Show/Hide main plugin tool window" description="Shows/Hides main plugin tool window">
			<keyboard-shortcut first-keystroke="shift control p" keymap="$default" />
		</action>
		
		<action id="ThePlugin.AddServerAction" class="com.atlassian.theplugin.idea.config.serverconfig.action.AddServerAction" text="Add (Insert)" description="Add a new server" icon="/general/add.png"/>
        <action id="ThePlugin.RemoveServerAction" class="com.atlassian.theplugin.idea.config.serverconfig.action.RemoveServerAction" text="Remove (Delete)" description="Remove an existing server" icon="/general/remove.png">
		</action>

		<action id="ThePlugin.CopyServerAction" class="com.atlassian.theplugin.idea.config.serverconfig.action.CopyServerAction" text="Copy" description="Copy the selected server" icon="/general/copy.png"/>

        <action id="ThePlugin.AddBambooServerAction" class="com.atlassian.theplugin.idea.config.serverconfig.action.AddBambooServerAction" text="Bamboo Server" description="Add a new Bamboo server" icon="/icons/blue-16.png">
		</action>
		

		<action id="ThePlugin.AddCrucibleServerAction" class="com.atlassian.theplugin.idea.config.serverconfig.action.AddCrucibleServerAction" text="Crucible Server" description="Add a new Crucible server" icon="/icons/crucible-16.png">
		</action>

		<action id="ThePlugin.ShowSettings" class="com.atlassian.theplugin.idea.action.ShowSettingsAction" text="Configure" description="Show plugin configuration" icon="/general/ideOptions.png">
			<keyboard-shortcut first-keystroke="shift control g" keymap="$default"/>
		</action>

		<action id="ThePlugin.Bamboo.RefreshStatus" class="com.atlassian.theplugin.idea.action.bamboo.RefreshBambooPanelAction" text="Refresh" description="Refresh" icon="/actions/sync.png" />

		<action id="ThePlugin.RunBuild" class="com.atlassian.theplugin.idea.action.bamboo.RunBuildAction" text="Run build" description="Run Bamboo build" icon="/actions/execute.png">
		</action>	
		<action id="ThePlugin.AddLabelToBuild" class="com.atlassian.theplugin.idea.action.bamboo.LabelBuildAction" text="Add label to build" description="Add label to Bamboo build" icon="/modules/annotation.png">
		</action>
		<action id="ThePlugin.AddCommentToBuild" class="com.atlassian.theplugin.idea.action.bamboo.CommentBuildAction" text="Add comment to build" description="Add comment to Bamboo build" icon="/actions/editSource.png">
		</action>
		<action id="ThePlugin.Bamboo.ShowHideBambooTab" class="com.atlassian.theplugin.idea.action.bamboo.ShowHideBambooTabAction" text="Show/Hide Bamboo tab" description="Shows or hides Bamboo tab in main plugin window">
			<keyboard-shortcut first-keystroke="shift control b" keymap="$default"/>
		</action>
		<action id="ThePlugin.HelpBamboo" class="com.atlassian.theplugin.idea.action.bamboo.BambooHelpAction" text="Help" description="Help" icon="/actions/help.png">
		</action>
		<action id="ThePlugin.HelpCrucible" class="com.atlassian.theplugin.idea.action.crucible.CrucibleHelpAction" text="Help" description="Help" icon="/actions/help.png">
		</action>
		<action id="ThePlugin.HelpJIRA" class="com.atlassian.theplugin.idea.action.jira.JIRAHelpAction" text="Help" description="Help" icon="/actions/help.png">
		</action>


		<group id="ThePlugin.ServerConfigToolBar" popup="false" text="">
            <reference id="ThePlugin.AddServerAction"/>
            <reference id="ThePlugin.RemoveServerAction"/>
<!--            <reference id="ThePlugin.CopyServerAction"/> -->
        </group>

		<group id="ThePlugin.ServerTypePopup">
            <reference id="ThePlugin.AddBambooServerAction"/>
            <reference id="ThePlugin.AddCrucibleServerAction"/>
		</group>


        <!-- Bamboo tool window panel related actions -->
		<group id="ThePlugin.BambooToolWindowToolBar" popup="false" text="">
            <reference id="ThePlugin.ShowSettings" />
			<reference id="ThePlugin.HelpBamboo" />
			<reference id="ThePlugin.Bamboo.RefreshStatus" />
			<separator />
			<reference id="ThePlugin.RunBuild" />
			<reference id="ThePlugin.AddLabelToBuild" />
			<reference id="ThePlugin.AddCommentToBuild" />
		</group>



        <!-- Crucible tool window panel related actions -->
		<action id="ThePlugin.Crucible.ShowHideCrucibleTab" class="com.atlassian.theplugin.idea.action.crucible.ShowHideCrucibleTabAction" text="Show/Hide Crucible tab" description="Shows or hides Crucuble tab in main plugin window">
			<keyboard-shortcut first-keystroke="shift control y" keymap="$default"/>
		</action>
		<action id="ThePlugin.Crucible.RefreshStatus" class="com.atlassian.theplugin.idea.action.crucible.RefreshCruciblePanelAction" text="Refresh" description="Refresh" icon="/actions/sync.png" />
		<action id="ThePlugin.ReviewScope" class="com.atlassian.theplugin.idea.action.ReviewScope" text="Review scope" description="Select review scope">
		</action>
		<action id="ThePlugin.ReviewScopeAll" class="com.atlassian.theplugin.idea.action.ReviewScopeAll" text="All Reviews" description="Show all reviews"/>
		<action id="ThePlugin.ReviewScopeMy" class="com.atlassian.theplugin.idea.action.ReviewScopeMy" text="My Reviews" description="Show my reviews"/>

		<group id="ThePlugin.ReviewScopeCombo">
            <reference id="ThePlugin.ReviewScopeAll"/>
            <reference id="ThePlugin.ReviewScopeMy"/>
		</group>
        
        <group id="ThePlugin.CrucibleToolWindowToolBar" popup="false" text="">
            <reference id="ThePlugin.ShowSettings" />
			<reference id="ThePlugin.HelpCrucible" />
			<reference id="ThePlugin.Crucible.RefreshStatus" />
			<separator />
			<!--<separator />-->
			<!--<reference id="ThePlugin.ReviewScope"/>-->
        </group>



        <!-- JIRA tool window panel related actions -->
		<action id="ThePlugin.JIRA.ShowHideJIRATab" class="com.atlassian.theplugin.idea.action.jira.ShowHideJiraTabAction" text="Show/Hide Jira tab" description="Shows or hides Jira tab in main plugin window">
			<keyboard-shortcut first-keystroke="shift control k" keymap="$default"/>
		</action>
		<action id="ThePlugin.JIRA.RefreshIssues" class="com.atlassian.theplugin.idea.action.JIRARefreshIssuesAction" text="Refresh assigned JIRA issues"  icon="/actions/sync.png"/>
		<action id="ThePlugin.JIRA.ShowFilter" class="com.atlassian.theplugin.idea.action.jira.JIRAShowIssuesFilterAction" text="Show JIRA filter dialog"  icon="/actions/find.png"/>
		<action id="ThePlugin.JIRA.QuickSearch" class="com.atlassian.theplugin.idea.action.jira.QuickSearchAction" text="Search JIRA issues"  icon="/actions/find.png">
            <keyboard-shortcut first-keystroke="shift alt s" keymap="$default"/>
        </action>
        <action id="ThePlugin.JIRA.CommentIssueAction" class="com.atlassian.theplugin.idea.action.jira.CommentIssueAction" text="Comment on JIRA issue">
            <keyboard-shortcut first-keystroke="shift alt m" keymap="$default"/>
        </action>

        <action id="ThePlugin.JIRA.CreateIssue" class="com.atlassian.theplugin.idea.action.jira.CreateIssueAction" text="Create JIRA Issue"  icon="/general/add.png">
            <keyboard-shortcut first-keystroke="shift alt n" keymap="$default"/>
        </action>

        <action id="ThePlugin.JIRA.MyIssues" class="com.atlassian.theplugin.idea.action.jira.MyIssuesAction" text="Mine"/>
        <action id="ThePlugin.JIRA.UnresolvedIssues" class="com.atlassian.theplugin.idea.action.jira.UnresolvedIssuesAction" text="Unresolved"/>
        <action id="ThePlugin.JIRA.ServerCombo" class="com.atlassian.theplugin.idea.action.jira.SelectJIRAAction" text="JIRA Server" />
        <action id="ThePlugin.JIRA.ProjectCombo" class="com.atlassian.theplugin.idea.action.jira.ProjectComboAction" text="Any Project" />
        <action id="ThePlugin.JIRA.StatusCombo" class="com.atlassian.theplugin.idea.action.jira.StatusComboAction" text="Any Status" />
        <action id="ThePlugin.JIRA.TypeCombo" class="com.atlassian.theplugin.idea.action.jira.IssueTypeComboAction" text="Any Issue Type"/>		
        <action id="ThePlugin.JIRA.SavedFilterCombo" class="com.atlassian.theplugin.idea.action.jira.SavedFilterComboAction" text="Select saved filter"/>

		<action id="ThePlugin.JIRA.VersionCombo" class="com.atlassian.theplugin.idea.action.jira.SelectJIRAAction" text="Any Version" />
        <action id="ThePlugin.JIRA.ComponentCombo" class="com.atlassian.theplugin.idea.action.jira.SelectJIRAAction" text="Any Component" />

        <action id="ThePlugin.AddJIRAServerAction" class="com.atlassian.theplugin.idea.config.serverconfig.action.AddJIRAServerAction" text="JIRA Server" description="Add a new JIRA server" icon="/icons/jira-blue-16.png">
            <add-to-group group-id="ThePlugin.ServerTypePopup" anchor="last"/>
        </action>		

		<group id="ThePlugin.JIRA.ServerToolBar" popup="false">
			<reference id="ThePlugin.ShowSettings" />
			<reference id="ThePlugin.HelpJIRA" />
			<reference id="ThePlugin.JIRA.RefreshIssues" />
			<separator />
            <reference id="ThePlugin.JIRA.ServerCombo"/>
            <separator />
            <reference id="ThePlugin.JIRA.CreateIssue" />
            <reference id="ThePlugin.JIRA.QuickSearch" />
		</group>

        <group id="ThePlugin.JIRA.FilterToolBarTop" popup="false">
            <reference id="ThePlugin.JIRA.ProjectCombo"/>
            <reference id="ThePlugin.JIRA.StatusCombo"/>
            <reference id="ThePlugin.JIRA.TypeCombo"/>
            <reference id="ThePlugin.JIRA.SavedFilterCombo"/>			
		</group>

        <group id="ThePlugin.JIRA.FilterToolBarBottom" popup="true" >
            <!--<reference id="ThePlugin.JIRA.VersionCombo"/>-->
            <!--<reference id="ThePlugin.JIRA.ComponentCombo"/>-->
            <!--<separator />-->
            <reference id="ThePlugin.JIRA.MyIssues" />
            <reference id="ThePlugin.JIRA.UnresolvedIssues" />
            <separator />

			<reference id="ThePlugin.JIRA.ShowFilter"/>
		</group>

    </actions>
</idea-plugin>