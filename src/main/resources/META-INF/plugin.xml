<!--

    Copyright (C) 2008 Atlassian
    
    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at
    
       http://www.apache.org/licenses/LICENSE-2.0
    
    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

-->

<!--jgorycki: putting DOCTYPE here does evil things to the parser - it tries to parse the -->
<!--downloaded DTD file which happens to be corrupt (JetBrain sucks?)-->
<!-- <!DOCTYPE idea-plugin PUBLIC "Plugin/DTD" "http://plugins.intellij.net/plugin.dtd"> -->
<idea-plugin url="http://www.atlassian.com/software/ideplugin/">

    <name>Atlassian</name>
    <!-- taken from pom to identify plugin package in internal IDEA plugin manager's repository-->
    <!--
        todo lguminski/jjaroczynski check if there is some decent way of getting artifactId from pom.xml
        <plugin-id>${project.artifactId}</plugin-id>
    -->
    <plugin-id>atlassian-idea-plugin</plugin-id>
    <description>
        <![CDATA[
		The plugin providing IDEA IDE integration for the following Atlassian products:
		<ul>
			<li>Bamboo</li>
			<li>Crucible 1.5 and above (1.6 version required for "enhanced" integration)</li>
			<li>JIRA 3.7 and above</li>
			<li>Confluence - in the future</li>
			<li>Fisheye - in the future</li>
		</ul>
		]]>
    </description>

    <version>${project.version}, SVN:${buildNumber}</version>
    <!--<version>1.0.1, SVN:15504</version>-->

    <!--no email link for now - we don't have the plugin email alias yet-->
    <!--<vendor url="http://www.atlassian.com" email="support@atlassian.com">Atlassian</vendor>-->
    <vendor url="http://www.atlassian.com">Atlassian</vendor>

    <!--we will only support IDEAs 7.x for now - the one we are testing on -->
    <!--jgorycki: I hope 7126 is the first build of 7.0. This is at least what the checkstyle plugin uses-->
    <!-- jjaroczynski: official build of 7.0 was 7361.  -->
    <idea-version since-build="7361"/>

    <change-notes>
        <![CDATA[
		<ul>
			<li>1.7.0: Bamboo build stack traces; bamboo build commit list</li>
			<li>1.6.0: JIRA issue editor improved; self-signed SSL certs handled + misc. fixes</li>
			<li>1.5.0: JIRA Issue Editor view introduced; proxy improxements + misc fixes</li>
			<li>1.4.1: errata release</li>
		    <li>1.4.0: Crucible 1.6 integration "dashboard", JIRA action support</li>
            <li>1.3.1: errata release</li>
		    <li>1.3.0: Several new JIRA features (logging work, assigning issues, etc.)</li>
		    <li>1.2.1: Errata release - restored saved filters functionality (bug PL-329)</li>
			<li>1.2.0: proxy support, work loging for JIRA, switched from XMLRPC to SOAP</li>
		    <li>1.1.0: Bug fix release</li>
			<li>1.0.1: Errata release</li>
			<li>1.0.0: first public release. With advanced JIRA filtering capabilities</li>
			<li>0.5.0: even more small improvements and bugfixes. UI looks really nice now</li>
			<li>0.4.0: many small improvements and bugfixes</li>
			<li>0.3.1: now with basic JIRA support! And autoupdate</li>
			<li>0.3.0: broken :(</li>
			<li>0.2.0: Look&feel improvements, bug fixes and initial support for Crucible</li>
			<li>0.1.0: A much more stable version with a nicely working bamboo build status support,
			but crappy visuals</li>
			<li>0.0.1: Initial version with minimal functionality and many annoyng bugs</li>
		</ul>
		]]>
    </change-notes>

    <extensions xmlns="com.intellij">
        <arealistener implementation="com.atlassian.theplugin.idea.PerProjectPicoInit"/>
        <customScopesProvider implementation="com.atlassian.theplugin.idea.crucible.CrucibleReviewScopeProvider"/>
        <errorHandler implementation="com.atlassian.theplugin.idea.BlameAtlassian"/>
    </extensions>

    <application-components>
        <component>
            <implementation-class>com.atlassian.theplugin.idea.ThePluginApplicationComponent</implementation-class>
        </component>
        <component>
            <implementation-class>com.atlassian.theplugin.idea.jira.editor.ThePluginJIRAEditorComponent
            </implementation-class>
        </component>
    </application-components>
    <project-components>
        <component>
            <implementation-class>com.atlassian.theplugin.idea.ThePluginProjectComponent</implementation-class>
        </component>
    </project-components>

    <actions>
        <action id="ThePlugin.ShowHideMainToolWindow"
                class="com.atlassian.theplugin.idea.action.ShowHideMainPluginWindowAction"
                text="Show/Hide main plugin tool window" description="Shows/Hides main plugin tool window">
            <keyboard-shortcut first-keystroke="shift control p" keymap="$default"/>
        </action>

        <action id="ThePlugin.AddServerAction"
                class="com.atlassian.theplugin.idea.config.serverconfig.action.AddServerAction" text="Add (Insert)"
                description="Add a new server" icon="/general/add.png"/>
        <action id="ThePlugin.RemoveServerAction"
                class="com.atlassian.theplugin.idea.config.serverconfig.action.RemoveServerAction"
                text="Remove (Delete)" description="Remove an existing server" icon="/general/remove.png"/>

        <action id="ThePlugin.AddBambooServerAction"
                class="com.atlassian.theplugin.idea.config.serverconfig.action.AddBambooServerAction"
                text="Bamboo Server" description="Add a new Bamboo server" icon="/icons/blue-16.png"/>
        <action id="ThePlugin.AddCrucibleServerAction"
                class="com.atlassian.theplugin.idea.config.serverconfig.action.AddCrucibleServerAction"
                text="Crucible Server" description="Add a new Crucible server" icon="/icons/crucible-16.png"/>
        <action id="ThePlugin.AddJIRAServerAction"
                class="com.atlassian.theplugin.idea.config.serverconfig.action.AddJIRAServerAction" text="JIRA Server"
                description="Add a new JIRA server" icon="/icons/jira-blue-16.png"/>

        <group id="ThePlugin.ServerConfigToolBar" popup="false" text="">
            <reference id="ThePlugin.AddServerAction"/>
            <reference id="ThePlugin.RemoveServerAction"/>
        </group>

        <group id="ThePlugin.ServerTypePopup">
            <reference id="ThePlugin.AddBambooServerAction"/>
            <reference id="ThePlugin.AddCrucibleServerAction"/>
            <reference id="ThePlugin.AddJIRAServerAction"/>
        </group>

        <action id="ThePlugin.ShowSettings" class="com.atlassian.theplugin.idea.action.ShowSettingsAction"
                text="Configure" description="Show plugin configuration" icon="/general/ideOptions.png">
            <keyboard-shortcut first-keystroke="shift control g" keymap="$default"/>
        </action>

        <action id="ThePlugin.HelpBamboo" class="com.atlassian.theplugin.idea.action.bamboo.BambooHelpAction"
                text="Help" description="Help" icon="/actions/help.png"/>
        <action id="ThePlugin.HelpCrucible" class="com.atlassian.theplugin.idea.action.crucible.CrucibleHelpAction"
                text="Help" description="Help" icon="/actions/help.png"/>
        <action id="ThePlugin.HelpJIRA" class="com.atlassian.theplugin.idea.action.jira.JIRAHelpAction" text="Help"
                description="Help" icon="/actions/help.png"/>

        <!-- Bamboo tool window panel related actions -->
        <action id="ThePlugin.Bamboo.RefreshStatus"
                class="com.atlassian.theplugin.idea.action.bamboo.RefreshBambooPanelAction" text="Refresh"
                description="Refresh" icon="/actions/sync.png"/>
        <action id="ThePlugin.Bamboo.ViewBuild" class="com.atlassian.theplugin.idea.action.bamboo.ViewBuildAction"
                text="View" description="View Bamboo build" icon="/general/web.png"/>
        <action id="ThePlugin.Bamboo.RunBuild" class="com.atlassian.theplugin.idea.action.bamboo.RunBuildAction"
                text="Run build" description="Run Bamboo build" icon="/actions/execute.png"/>
        <action id="ThePlugin.Bamboo.AddLabelToBuild"
                class="com.atlassian.theplugin.idea.action.bamboo.LabelBuildAction" text="Add label to build"
                description="Add label to Bamboo build" icon="/icons/icn_label.gif"/>
        <action id="ThePlugin.Bamboo.AddCommentToBuild"
                class="com.atlassian.theplugin.idea.action.bamboo.CommentBuildAction" text="Add comment to build"
                description="Add comment to Bamboo build" icon="/actions/editSource.png"/>
        <action id="ThePlugin.Bamboo.ShowHideBambooTab"
                class="com.atlassian.theplugin.idea.action.bamboo.ShowHideBambooTabAction" text="Show/Hide Bamboo tab"
                description="Shows or hides Bamboo tab in main plugin window">
            <keyboard-shortcut first-keystroke="shift control b" keymap="$default"/>
        </action>
        <action id="ThePlugin.Bamboo.ShowStackTrace"
                class="com.atlassian.theplugin.idea.action.bamboo.BuildStackTraceAction" text="Show Failed Tests"
                description="Show Failed Tests" icon="/debugger/stackFrame.png"/>
        <action id="ThePlugin.Bamboo.ShowChanges" class="com.atlassian.theplugin.idea.action.bamboo.BuildChangesAction"
                text="Show Changed Files" description="Show Changed Files" icon="/actions/createPatch.png">
            <keyboard-shortcut first-keystroke="control D" keymap="$default"/>
                </action>
        <action id="ThePlugin.Bamboo.ShowLog" class="com.atlassian.theplugin.idea.action.bamboo.ShowLogAction"
                text="Show Build Logs" description="Show Build Logs" icon="/actions/export.png"/>
        <action id="ThePlugin.Bamboo.ExpandTests" class="com.atlassian.theplugin.idea.action.bamboo.ExpandTestsAction"
                text="Expand All" icon="/actions/expandall.png"/>
        <action id="ThePlugin.Bamboo.CollapseTests"
                class="com.atlassian.theplugin.idea.action.bamboo.CollapseTestsAction" text="Collapse All"
                icon="/actions/collapseall.png"/>
        <action id="ThePlugin.Bamboo.ToggleAllTests"
                class="com.atlassian.theplugin.idea.action.bamboo.ToggleAllTestsAction" text="Hide Passed"
                icon="/runConfigurations/hidePassed.png"/>


        <action id="ThePlugin.Bamboo.Changes.GoToSource" class="com.atlassian.theplugin.idea.action.bamboo.changes.GoToSourceAction" text="Jump to Source" icon="/actions/export.png">
            <keyboard-shortcut first-keystroke="F4" keymap="$default"/>
        </action>
        <action id="ThePlugin.Bamboo.Changes.ShowDiff"
                class="com.atlassian.theplugin.idea.action.bamboo.changes.ShowDiffAction" text="Show Diff"
                icon="/actions/diff.png">
            <keyboard-shortcut first-keystroke="ctrl D" keymap="$default"/>
                </action>
        <action id="ThePlugin.Bamboo.Changes.DiffWithLocal"
                class="com.atlassian.theplugin.idea.action.bamboo.changes.DiffWithLocalAction"
                text="Show Diff With Local" icon="/actions/diffWithCurrent.png"/>
        <action id="ThePlugin.Bamboo.Changes.OpenRepoVersion"
                class="com.atlassian.theplugin.idea.action.bamboo.changes.OpenRepoVersionAction"
                text="Open Repository Version" icon="/objectBrowser/showEditorHighlighting.png"/>
        <action id="ThePlugin.Bamboo.Changes.GroupByDir"
                class="com.atlassian.theplugin.idea.action.bamboo.changes.GroupByDirectoryAction"
                text="Group By Directory" icon="/nodes/folder.png"/>
        <action id="ThePlugin.Bamboo.Changes.ExpandFiles"
                class="com.atlassian.theplugin.idea.action.bamboo.changes.ExpandFilesAction" text="Expand All"
                icon="/actions/expandall.png"/>
        <action id="ThePlugin.Bamboo.Changes.CollapseFiles"
                class="com.atlassian.theplugin.idea.action.bamboo.changes.CollapseFilesAction" text="Collapse All"
                icon="/actions/collapseall.png"/>

        <group id="ThePlugin.BambooToolWindowToolBar" popup="false" text="">
            <reference id="ThePlugin.ShowSettings"/>
            <reference id="ThePlugin.HelpBamboo"/>
            <reference id="ThePlugin.Bamboo.RefreshStatus"/>
            <separator/>
            <reference id="ThePlugin.Bamboo.ShowStackTrace"/>
            <reference id="ThePlugin.Bamboo.ShowChanges"/>
            <reference id="ThePlugin.Bamboo.ShowLog"/>
            <separator/>
            <reference id="ThePlugin.Bamboo.RunBuild"/>
            <reference id="ThePlugin.Bamboo.AddLabelToBuild"/>
            <reference id="ThePlugin.Bamboo.AddCommentToBuild"/>
        </group>

        <group id="ThePlugin.Bamboo.BuildPopupMenu" popup="true">
            <reference id="ThePlugin.Bamboo.ViewBuild"/>
            <reference id="ThePlugin.Bamboo.ShowStackTrace"/>
            <reference id="ThePlugin.Bamboo.ShowChanges"/>
            <separator/>
            <reference id="ThePlugin.Bamboo.AddLabelToBuild"/>
            <reference id="ThePlugin.Bamboo.AddCommentToBuild"/>
            <reference id="ThePlugin.Bamboo.ShowLog"/>
            <separator/>
            <reference id="ThePlugin.Bamboo.RunBuild"/>
        </group>

        <group id="ThePlugin.Bamboo.TestResultsToolBar" popup="false">
            <reference id="ThePlugin.Bamboo.ToggleAllTests"/>
            <separator/>
            <reference id="ThePlugin.Bamboo.ExpandTests"/>
            <reference id="ThePlugin.Bamboo.CollapseTests"/>
        </group>

        <group id="ThePlugin.Bamboo.CommitListToolBar" popup="false">
            <reference id="ThePlugin.Bamboo.Changes.GoToSource"/>
            <reference id="ThePlugin.Bamboo.Changes.ShowDiff"/>
            <reference id="ThePlugin.Bamboo.Changes.DiffWithLocal"/>
            <reference id="ThePlugin.Bamboo.Changes.OpenRepoVersion"/>
            <separator/>
            <reference id="ThePlugin.Bamboo.Changes.GroupByDir"/>
            <reference id="ThePlugin.Bamboo.Changes.ExpandFiles"/>
            <reference id="ThePlugin.Bamboo.Changes.CollapseFiles"/>
        </group>


        <!-- Crucible tool window panel related actions -->
        <action id="ThePlugin.Crucible.ShowHideCrucibleTab"
                class="com.atlassian.theplugin.idea.action.crucible.ShowHideCrucibleTabAction"
                text="Show/Hide Crucible tab" description="Shows or hides Crucuble tab in main plugin window">
            <keyboard-shortcut first-keystroke="shift control y" keymap="$default"/>
        </action>
        <action id="ThePlugin.Crucible.RefreshStatus"
                class="com.atlassian.theplugin.idea.action.crucible.RefreshCruciblePanelAction" text="Refresh"
                description="Refresh" icon="/actions/sync.png"/>
        <action id="ThePlugin.Crucible.ViewReview" class="com.atlassian.theplugin.idea.action.crucible.ViewReviewAction"
                text="View review in browser" icon="/general/web.png"/>
        <action id="ThePlugin.Crucible.GetComments"
                class="com.atlassian.theplugin.idea.action.crucible.GetCommentsAction" text="Get Comments"
                icon="/icons/inspector/sortByCategory.png"/>
        <action id="ThePlugin.Crucible.GetGeneralCommentReplies"
                class="com.atlassian.theplugin.idea.action.crucible.GetGeneralCommentRepliesAction" text="View Replies"
                icon="/icons/inspector/sortByCategory.png"/>

        <action id="ThePlugin.Crucible.ToReviewAction"
                class="com.atlassian.theplugin.idea.action.crucible.ToReviewAction" text="To review"/>
        <action id="ThePlugin.Crucible.ToReviewComboAction"
                class="com.atlassian.theplugin.idea.action.crucible.ToReviewAction" text="To review"/>
        <action id="ThePlugin.Crucible.RequireApprovalAction"
                class="com.atlassian.theplugin.idea.action.crucible.RequireApprovalAction" text="Require approval"/>
        <action id="ThePlugin.Crucible.ToSummarizeAction"
                class="com.atlassian.theplugin.idea.action.crucible.ToSummarizeAction" text="To summarize"/>
        <action id="ThePlugin.Crucible.OutForReviewAction"
                class="com.atlassian.theplugin.idea.action.crucible.OutForReviewAction" text="Out for review"/>
        <action id="ThePlugin.Crucible.DraftsAction" class="com.atlassian.theplugin.idea.action.crucible.DraftsAction"
                text="Drafts"/>
        <action id="ThePlugin.Crucible.OpenAction" class="com.atlassian.theplugin.idea.action.crucible.OpenAction"
                text="Open"/>
        <action id="ThePlugin.Crucible.ClosedAction" class="com.atlassian.theplugin.idea.action.crucible.ClosedAction"
                text="Closed"/>
        <action id="ThePlugin.Crucible.AbandonedAction"
                class="com.atlassian.theplugin.idea.action.crucible.AbandonedAction" text="Abandoned"/>
        <action id="ThePlugin.Crucible.AllOpen" class="com.atlassian.theplugin.idea.action.crucible.AllOpenAction"
                text="All open"/>
        <action id="ThePlugin.Crucible.AllClosed" class="com.atlassian.theplugin.idea.action.crucible.AllClosedAction"
                text="All closed"/>
        <action id="ThePlugin.Crucible.All" class="com.atlassian.theplugin.idea.action.crucible.AllAction" text="All"/>

        <action id="ThePlugin.Crucible.CustomFilter"
                class="com.atlassian.theplugin.idea.action.crucible.CustomFilterAction" text="Custom filter"/>

        <action id="ThePlugin.Crucible.ShowFilter"
                class="com.atlassian.theplugin.idea.action.crucible.CrucibleShowCustomFilterAction"
                text="Edit custom filter" icon="/general/toolWindowFavorites.png"/>
        <action id="ThePlugin.Crucible.AddCustomFilter"
                class="com.atlassian.theplugin.idea.action.crucible.CrucibleAddCustomFilterAction"
                text="Add Crucible custom filter" icon="/general/add.png"/>
        <action id="ThePlugin.Crucible.RemoveCustomFilter"
                class="com.atlassian.theplugin.idea.action.crucible.CrucibleRemoveCustomFilterAction"
                text="Remove Crucible custom filter" icon="/general/remove.png"/>
        <action id="ThePlugin.Crucible.ApplyFilter"
                class="com.atlassian.theplugin.idea.action.crucible.ApplyFilterAction" text="Apply filter"
                icon="/actions/er-state.png"/>
        <action id="ThePlugin.Crucible.CancelFilter"
                class="com.atlassian.theplugin.idea.action.crucible.CancelFilterChangeAction" text="Cancel"
                icon="/actions/cancel.png"/>
        <action id="ThePlugin.Crucible.ClearFilter"
                class="com.atlassian.theplugin.idea.action.crucible.ClearFilterAction" text="Clear filter"
                icon="/general/reset.png"/>

        <action id="ThePlugin.Crucible.ExpandAll" class="com.atlassian.theplugin.idea.action.crucible.ExpandAllAction"
                text="Expand all" icon="/actions/expandall.png"/>
        <action id="ThePlugin.Crucible.CollapseAll"
                class="com.atlassian.theplugin.idea.action.crucible.CollapseAllAction" text="Collapse all"
                icon="/actions/collapseall.png"/>

        <action id="ThePlugin.Crucible.PostCommitReview"
                class="com.atlassian.theplugin.idea.action.crucible.PostCommitReviewAction" text="Create review"
                icon="/icons/crucible-blue-16.png"/>
        <action id="ThePlugin.Crucible.AddRevisionToReview"
                class="com.atlassian.theplugin.idea.action.crucible.AddRevisionToReviewAction"
                text="Add revision to review" icon="/icons/fisheye-16-plus.png"/>
        <action id="ThePlugin.Crucible.ViewFisheyeChangeset"
                class="com.atlassian.theplugin.idea.action.crucible.ViewFisheyeChangesetAction" text="View changeset"
                icon="/icons/fisheye-16.png"/>
        <action id="ThePlugin.Crucible.PreCommitReview"
                class="com.atlassian.theplugin.idea.action.crucible.PreCommitReview" text="Pre-commit review"
                icon="/icons/crucible-blue-16.png"/>
        <action id="ThePlugin.Crucible.AddPatchToReview"
                class="com.atlassian.theplugin.idea.action.crucible.AddPatchToReviewAction" text="Add patch to review"
                icon="/icons/fisheye-16-plus.png"/>

        <action id="ThePlugin.Crucible.CompleteReview"
                class="com.atlassian.theplugin.idea.action.crucible.CompleteReviewAction" text="Complete review"/>
        <action id="ThePlugin.Crucible.UncompleteReview"
                class="com.atlassian.theplugin.idea.action.crucible.UncompleteReviewAction" text="Uncomplete review"/>
        <action id="ThePlugin.Crucible.ApproveReview"
                class="com.atlassian.theplugin.idea.action.crucible.ApproveReviewAction" text="Approve review"/>
        <action id="ThePlugin.Crucible.CloseReview"
                class="com.atlassian.theplugin.idea.action.crucible.CloseReviewAction" text="Close review"/>
        <action id="ThePlugin.Crucible.ReopenReview"
                class="com.atlassian.theplugin.idea.action.crucible.ReopenReviewAction" text="Reopen review"/>
        <action id="ThePlugin.Crucible.SummarizeReview"
                class="com.atlassian.theplugin.idea.action.crucible.SummarizeReviewAction" text="Summarize review"/>
        <action id="ThePlugin.Crucible.AbandonReview"
                class="com.atlassian.theplugin.idea.action.crucible.AbandonReviewAction" text="Abandon review"/>
        <action id="ThePlugin.Crucible.RecoverReview"
                class="com.atlassian.theplugin.idea.action.crucible.RecoverReviewAction"
                text="Recover abandoned review"/>

		<action id="ThePlugin.Crucible.Comment.Reply"
				class="com.atlassian.theplugin.idea.action.crucible.comment.AddAction"
				text="Add comment" icon="/general/add.png"/>
		<action id="ThePlugin.Crucible.Comment.Edit"
				class="com.atlassian.theplugin.idea.action.crucible.comment.EditAction"
				text="Edit comment" icon="/actions/editSource.png"/>
		<action id="ThePlugin.Crucible.Comment.Remove"
				class="com.atlassian.theplugin.idea.action.crucible.comment.RemoveAction"
				text="Remove comment" icon="/general/remove.png"/>

		<group id="ThePlugin.Crucible.PostCommit" popup="false" text="">
            <reference id="ThePlugin.Crucible.PostCommitReview"/>
            <reference id="ThePlugin.Crucible.AddRevisionToReview"/>
            <reference id="ThePlugin.Crucible.ViewFisheyeChangeset"/>
            <add-to-group anchor="last" group-id="CommittedChangesToolbar"/>
        </group>

        <group id="ThePlugin.Crucible.PreCommit" popup="false" text="">
            <reference id="ThePlugin.Crucible.PreCommitReview"/>
            <reference id="ThePlugin.Crucible.AddPatchToReview"/>
            <add-to-group anchor="last" group-id="ChangesViewToolbar"/>
        </group>

        <group id="ThePlugin.CrucibleToolWindowToolBar" popup="false" text="">

            <reference id="ThePlugin.ShowSettings"/>
            <reference id="ThePlugin.HelpCrucible"/>
            <reference id="ThePlugin.Crucible.RefreshStatus"/>
            <separator/>
            <reference id="ThePlugin.Crucible.ExpandAll"/>
            <reference id="ThePlugin.Crucible.CollapseAll"/>
            <separator/>
            <!--
            <reference id="ThePlugin.Crucible.ToReviewAction" />
            -->
            <reference id="ThePlugin.Crucible.ShowFilter"/>
            <!--
            <reference id="ThePlugin.Crucible.AddCustomFilter" />
            <reference id="ThePlugin.Crucible.RemoveCustomFilter" />
            -->
        </group>

        <group id="ThePlugin.EmptyToolBar" popup="false" text=""/>

        <group id="ThePlugin.CrucibleFilterCombo" popup="true" text="" icon="/ant/filter.png">
            <reference id="ThePlugin.Crucible.ToReviewComboAction"/>
            <reference id="ThePlugin.Crucible.RequireApprovalAction"/>
            <reference id="ThePlugin.Crucible.ToSummarizeAction"/>
            <reference id="ThePlugin.Crucible.OutForReviewAction"/>
            <reference id="ThePlugin.Crucible.DraftsAction"/>
            <reference id="ThePlugin.Crucible.OpenAction"/>
            <reference id="ThePlugin.Crucible.ClosedAction"/>
            <reference id="ThePlugin.Crucible.AbandonedAction"/>
            <separator/>
            <reference id="ThePlugin.Crucible.AllOpen"/>
            <reference id="ThePlugin.Crucible.AllClosed"/>
            <reference id="ThePlugin.Crucible.All"/>
            <separator/>
            <reference id="ThePlugin.Crucible.CustomFilter"/>
            <add-to-group anchor="last" group-id="ThePlugin.CrucibleToolWindowToolBar"/>
        </group>

        <group id="ThePlugin.CrucibleReviewToolBar" popup="false" text="">
            <reference id="ThePlugin.Crucible.ViewReview"/>
            <separator/>
            <reference id="ThePlugin.Crucible.GetComments"/>
            <separator/>
            <reference id="ThePlugin.Crucible.CompleteReview"/>
            <reference id="ThePlugin.Crucible.UncompleteReview"/>
            <reference id="ThePlugin.Crucible.CloseReview"/>
        </group>

        <group id="ThePlugin.CrucibleGeneralCommentToolBar" popup="false" text="">
            <reference id="ThePlugin.Crucible.GetGeneralCommentReplies"/>
        </group>

        <group id="ThePlugin.CrucibleRevisionCommentToolBar" popup="false" text="">
            <reference id="ThePlugin.Crucible.ViewReview"/>
            <separator/>
            <reference id="ThePlugin.Crucible.GetComments"/>
        </group>

        <group id="ThePlugin.Crucible.ReviewPopupMenu" popup="true">
            <reference id="ThePlugin.Crucible.ViewReview"/>
            <separator/>
            <reference id="ThePlugin.Crucible.GetComments"/>
            <separator/>
            <reference id="ThePlugin.Crucible.CompleteReview"/>
            <reference id="ThePlugin.Crucible.UncompleteReview"/>
            <separator/>
            <reference id="ThePlugin.Crucible.ApproveReview"/>
            <reference id="ThePlugin.Crucible.CloseReview"/>
            <reference id="ThePlugin.Crucible.ReopenReview"/>
            <reference id="ThePlugin.Crucible.SummarizeReview"/>
            <reference id="ThePlugin.Crucible.AbandonReview"/>
            <reference id="ThePlugin.Crucible.RecoverReview"/>
        </group>

		<group id="ThePlugin.Crucible.Comment.ToolBar" popup="true">
			<reference id="ThePlugin.Crucible.Comment.Reply"/>
			<reference id="ThePlugin.Crucible.Comment.Edit"/>
			<reference id="ThePlugin.Crucible.Comment.Remove"/>
		</group>

		<group id="ThePlugin.Crucible.FilterEditToolBar" popup="false">
            <reference id="ThePlugin.Crucible.ApplyFilter"/>
            <reference id="ThePlugin.Crucible.CancelFilter"/>
            <!--			<reference id="ThePlugin.Crucible.ClearFilter"/> -->
        </group>


        <!-- JIRA tool window panel related actions -->
        <action id="ThePlugin.JIRA.ShowHideJIRATab"
                class="com.atlassian.theplugin.idea.action.jira.ShowHideJiraTabAction" text="Show/Hide Jira tab"
                description="Shows or hides Jira tab in main plugin window">
            <keyboard-shortcut first-keystroke="shift control k" keymap="$default"/>
        </action>
        <action id="ThePlugin.JIRA.RefreshIssues"
                class="com.atlassian.theplugin.idea.action.jira.JIRARefreshIssuesAction" text="Refresh JIRA issues"
                icon="/actions/sync.png"/>
        <action id="ThePlugin.JIRA.ShowFilter"
                class="com.atlassian.theplugin.idea.action.jira.JIRAShowIssuesFilterAction"
                text="Show JIRA filter dialog" icon="/ant/filter.png"/>
        <action id="ThePlugin.JIRA.QuickSearch" class="com.atlassian.theplugin.idea.action.jira.QuickSearchAction"
                text="Search JIRA issues" icon="/actions/find.png">
            <keyboard-shortcut first-keystroke="shift alt s" keymap="$default"/>
        </action>

        <action id="ThePlugin.JIRA.NextPage" class="com.atlassian.theplugin.idea.action.jira.JIRANextPageAction"
                text="Next results page" icon="/actions/forward.png"/>
        <action id="ThePlugin.JIRA.PreviousPage" class="com.atlassian.theplugin.idea.action.jira.JIRAPreviousPageAcion"
                text="Previous results page" icon="/actions/back.png"/>

        <action id="ThePlugin.JIRA.CommentIssueAction"
                class="com.atlassian.theplugin.idea.action.jira.CommentIssueAction" text="Comment on JIRA issue">
            <keyboard-shortcut first-keystroke="shift alt m" keymap="$default"/>
        </action>

        <action id="ThePlugin.JIRA.CreateIssue" class="com.atlassian.theplugin.idea.action.jira.CreateIssueAction"
                text="Create JIRA Issue" icon="/general/add.png">
            <keyboard-shortcut first-keystroke="shift alt n" keymap="$default"/>
        </action>

        <action id="ThePlugin.JIRA.ServerCombo" class="com.atlassian.theplugin.idea.action.jira.SelectJIRAAction"
                text="JIRA Server"/>
        <action id="ThePlugin.JIRA.SavedFilterCombo"
                class="com.atlassian.theplugin.idea.action.jira.SavedFilterComboAction" text="Select saved filter"/>
        <action id="ThePlugin.JIRA.FilterType" class="com.atlassian.theplugin.idea.action.jira.FilterTypeAction"
                text="Use server filters"/>

        <action id="ThePlugin.JIRA.ApplyFilter" class="com.atlassian.theplugin.idea.action.jira.ApplyFilterAction"
                text="Apply filter" icon="/actions/er-state.png"/>
        <action id="ThePlugin.JIRA.CancelFilter"
                class="com.atlassian.theplugin.idea.action.jira.CancelFilterChangeAction" text="Cancel"
                icon="/actions/cancel.png"/>
        <action id="ThePlugin.JIRA.ClearFilter" class="com.atlassian.theplugin.idea.action.jira.ClearFilterAction"
                text="Clear filter" icon="/general/reset.png"/>

        <group id="ThePlugin.JIRA.ServerToolBar" popup="false">
            <reference id="ThePlugin.ShowSettings"/>
            <reference id="ThePlugin.HelpJIRA"/>
            <reference id="ThePlugin.JIRA.RefreshIssues"/>
            <separator/>
            <reference id="ThePlugin.JIRA.ServerCombo"/>
            <separator/>
            <reference id="ThePlugin.JIRA.CreateIssue"/>
            <reference id="ThePlugin.JIRA.QuickSearch"/>
        </group>

        <action id="ThePlugin.JIRA.OpenIssue" class="com.atlassian.theplugin.idea.action.jira.OpenIssueAction"
                text="View in IDE"/>
        <action id="ThePlugin.JIRA.ViewIssue" class="com.atlassian.theplugin.idea.action.jira.ViewIssueAction"
                text="View in Browser"/>
        <action id="ThePlugin.JIRA.EditIssue" class="com.atlassian.theplugin.idea.action.jira.EditIssueAction"
                text="Edit in Browser"/>
        <action id="ThePlugin.JIRA.WorkflowActions" class="com.atlassian.theplugin.idea.action.jira.IssueWorkflowAction"
                text="Workflow Actions"/>
        <action id="ThePlugin.JIRA.AddComment" class="com.atlassian.theplugin.idea.action.jira.AddCommentAction"
                text="Add comment"/>
        <action id="ThePlugin.JIRA.LogWork" class="com.atlassian.theplugin.idea.action.jira.LogWorkAction"
                text="Log work"/>
        <action id="ThePlugin.JIRA.AssignIssueToMyself"
                class="com.atlassian.theplugin.idea.action.jira.AssignIssueToMyselfAction"
                text="Assign Issue to Myself"/>
        <action id="ThePlugin.JIRA.AssignIssueToUser"
                class="com.atlassian.theplugin.idea.action.jira.AssignIssueToUserAction" text="Assign Issue to User"/>
        <action id="ThePlugin.JIRA.CreateChangeList"
                class="com.atlassian.theplugin.idea.action.jira.CreateChangeListAction" text="Create Change List"/>


        <group id="ThePlugin.JIRA.IssuePopupMenu" popup="true">
            <reference id="ThePlugin.JIRA.OpenIssue"/>
            <reference id="ThePlugin.JIRA.ViewIssue"/>
            <reference id="ThePlugin.JIRA.EditIssue"/>
            <separator/>
            <reference id="ThePlugin.JIRA.AddComment"/>
            <reference id="ThePlugin.JIRA.LogWork"/>
            <reference id="ThePlugin.JIRA.CreateChangeList"/>
            <separator/>
            <reference id="ThePlugin.JIRA.AssignIssueToMyself"/>
            <reference id="ThePlugin.JIRA.AssignIssueToUser"/>
            <separator/>
            <!--uncomment the line below to get the popup-style issue actions-->
            <!--<reference id="ThePlugin.JIRA.WorkflowActions"/>-->
        </group>

        <group id="ThePlugin.JIRA.FilterToolBar" popup="false">
            <reference id="ThePlugin.JIRA.FilterType"/>
            <reference id="ThePlugin.JIRA.SavedFilterCombo"/>
            <reference id="ThePlugin.JIRA.ShowFilter"/>
            <separator/>
            <reference id="ThePlugin.JIRA.PreviousPage" anchor="last"/>
            <reference id="ThePlugin.JIRA.NextPage" anchor="last"/>
        </group>

        <group id="ThePlugin.JIRA.FilterEditToolBar" popup="false">
            <reference id="ThePlugin.JIRA.ApplyFilter"/>
            <reference id="ThePlugin.JIRA.CancelFilter"/>
            <reference id="ThePlugin.JIRA.ClearFilter"/>
        </group>

        <action id="ThePlugin.JIRA.RefreshComments"
                class="com.atlassian.theplugin.idea.action.jira.editor.RefreshCommentsAction" text="Refresh"
                icon="/actions/sync.png"/>
        <action id="ThePlugin.JIRA.ExpandComments"
                class="com.atlassian.theplugin.idea.action.jira.editor.ExpandCommentsAction" text="Expand All Comments"
                icon="/actions/expandall.png"/>
        <action id="ThePlugin.JIRA.CollapseComments"
                class="com.atlassian.theplugin.idea.action.jira.editor.CollapseCommentsAction"
                text="Collapse All Aomments" icon="/actions/collapseall.png"/>
        <action id="ThePlugin.JIRA.AddEditorComment"
                class="com.atlassian.theplugin.idea.action.jira.editor.AddCommentAction" text="Add Comment"
                icon="/general/add.png"/>
        <action id="ThePlugin.JIRA.EditorViewIssue"
                class="com.atlassian.theplugin.idea.action.jira.editor.EditorViewIssueAction" text="View in Browser"
                icon="/general/web.png"/>
        <action id="ThePlugin.JIRA.EditorEditIssue"
                class="com.atlassian.theplugin.idea.action.jira.editor.EditorEditIssueAction" text="Edit in Browser"
                icon="/actions/editSource.png"/>
        <action id="ThePlugin.JIRA.EditorAnalyseStackTrace"
                class="com.atlassian.theplugin.idea.action.jira.editor.EditorAnalyseStackTraceAction"
                text="Analyse Description Stack Trace" icon="/debugger/stackFrame.png"/>

        <group id="ThePlugin.JIRA.EditorToolBar" popup="false">
            <reference id="ThePlugin.JIRA.EditorViewIssue"/>
            <reference id="ThePlugin.JIRA.EditorEditIssue"/>
            <reference id="ThePlugin.JIRA.EditorAnalyseStackTrace"/>
        </group>

        <group id="ThePlugin.JIRA.CommentsToolBar" popup="false">
            <reference id="ThePlugin.JIRA.RefreshComments"/>
            <reference id="ThePlugin.JIRA.ExpandComments"/>
            <reference id="ThePlugin.JIRA.CollapseComments"/>
            <reference id="ThePlugin.JIRA.AddEditorComment"/>
        </group>


    </actions>
</idea-plugin>
