<?xml version="1.0" encoding="UTF-8"?>

<?eclipse version="3.2"?>

<plugin id="atlassian-eclipse-plugin" version="0.3.1" name="Attlasian Plugin">

   <extension point="org.eclipse.ui.actionSets">
      <actionSet label="Sample Action Set" visible="true" id="com.atlassian.theplugin.eclipse.actionSet">

         <menu label="Atlassian" id="atlassianMenu">
			<separator name="atlassianGroup">
            </separator>
         </menu>
         <!-- 
         <action label="Atlassian Sample Action" icon="icons/sample.gif" class="com.atlassian.theplugin.eclipse.actions.AtlassianSampleAction" tooltip="Atlassian Sample Action" menubarPath="atlassianMenu/atlassianGroup"  toolbarPath="atlassianGroup" id="com.atlassian.theplugin.eclipse.actions.SampleAction"> 
         </action>
         -->
      </actionSet>
   </extension>
   <extension point="org.eclipse.ui.views">
      <category id="com.atlassian.theplugin.eclipse.viewcategory" name="Atlassian Plugin">
      </category>
      <view allowMultiple="false"
            category="com.atlassian.theplugin.eclipse.viewcategory"
            class="com.atlassian.theplugin.eclipse.view.bamboo.BambooToolWindow"
            id="com.atlassian.theplugin.eclipse.view.bamboo.BambooToolWindow"
            name="Bamboo Watched Plans">
      </view>
   </extension>
   <extension point="org.eclipse.ui.views">
      <category id="com.atlassian.theplugin.eclipse.viewcategory" name="Atlassian Plugin">
      </category>
      <view allowMultiple="false"
            category="com.atlassian.theplugin.eclipse.viewcategory"
            class="com.atlassian.theplugin.eclipse.ui.bamboo.BambooServersView"
            id="com.atlassian.theplugin.eclipse.ui.bamboo.BambooServersView"
            name="Bamboo Servers">
      </view>
   </extension>
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            class="com.atlassian.theplugin.eclipse.preferences.PreferencePageServers"
            id="com.atlassian.theplugin.eclipse.preferences.PreferencePageServers"
            name="Atlassian Plugin">
      </page>
      <page
            category="com.atlassian.theplugin.eclipse.preferences.PreferencePageServers"
            class="com.atlassian.theplugin.eclipse.preferences.PreferencePageBamboo"
            id="acom.atlassian.theplugin.eclipse.preferences.PreferencePageBamboo"
            name="Bamboo">
      </page>
   </extension>
   <extension
         point="org.eclipse.core.runtime.preferences">
      <initializer
            class="com.atlassian.theplugin.eclipse.preferences.PreferenceInitializer">
      </initializer>
   </extension>
   <extension
         point="org.eclipse.ui.popupMenus">
         
         <!-- ******************* Repository Management Menu ******************** -->
      <objectContribution
            objectClass="com.atlassian.theplugin.eclipse.ui.bamboo.BambooServerNode"
            id="com.atlassian.theplugin.eclipse.ui.bamboo.BambooServerContributions">
            
         <action
               label="%EditBambooServerPropertiesAction.Label"
               class="com.atlassian.theplugin.eclipse.ui.action.bamboo.EditBambooServerPropertiesAction"
               tooltip="%EditBambooServerPropertiesAction.Tooltip"
               menubarPath="mainGroup"
               id="com.atlassian.theplugin.eclipse.ui.action.bamboo.EditBambooServerPropertiesAction">
         </action>
         <action
               label="%DeleteBambooServerAction.Label"
               class="com.atlassian.theplugin.eclipse.ui.action.bamboo.DeleteBambooServerAction"
               tooltip="%DeleteBambooServer.Tooltip"
               menubarPath="dynamicGroup"
               id="com.atlassian.theplugin.eclipse.ui.action.bamboo.DeleteBambooServerAction">
         </action>

      </objectContribution>
      
	</extension>
   
   <extension
         point="org.eclipse.ui.editors">
      <editor
            class="com.atlassian.theplugin.eclipse.editors.bamboo.BuildLogEditor"
            default="false"
            id="com.atlassian.theplugin.eclipse.editors.bamboo.LogEditor"
            name="BuilLogEditor">
      </editor>
   </extension>
   <extension
         point="org.eclipse.core.expressions.definitions">
      <definition
            id="BambooPlanNodeSelected">
         <with
               variable="activeMenuSelection">
            <iterate
                  ifEmpty="false">
               <instanceof
                     value="com.atlassian.theplugin.eclipse.ui.bamboo.BambooPlanNode">
               </instanceof>
            </iterate>
         </with>
      </definition>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="popup:org.eclipse.ui.popup.any">
         <command
               commandId="com.atlassian.theplugin.eclipse.ui.bamboo.watchPlan"
               label="Watch Plan"
               style="toggle"
               tooltip="Add Plan to the View &apos;Bamboo Watched Plans&apos;">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="BambooPlanNodeSelected">
               </reference>
            </visibleWhen>
         </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="com.atlassian.theplugin.eclipse.handlers.bamboo.WatchPlanHandler"
            commandId="com.atlassian.theplugin.eclipse.ui.bamboo.watchPlan">
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <category
            id="com.atlassian.theplugin.eclipse.ui.bamboo"
            name="name">
      </category>
      <command
            categoryId="com.atlassian.theplugin.eclipse.ui.bamboo"
            id="com.atlassian.theplugin.eclipse.ui.bamboo.watchPlan"
            name="Watch Plan">
      </command>
   </extension>
</plugin>
